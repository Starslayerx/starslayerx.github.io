<!doctype html><html lang=en dir=auto data-theme=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Blog | Starslayerx' Blog</title><meta name=keywords content><meta name=description content="A personal blog about technology, programming, and daily notes"><meta name=author content="Starslayerx"><link rel=canonical href=https://starslayerx.github.io/categories/blog/><link crossorigin=anonymous href=/assets/css/stylesheet.da3211e5ef867bf2b75fd5a6515cfed7195c011e8ab735694e203810a827097b.css integrity="sha256-2jIR5e+Ge/K3X9WmUVz+1xlcAR6KtzVpTiA4EKgnCXs=" rel="preload stylesheet" as=style><link rel=icon href=https://starslayerx.github.io/favicon.svg><link rel=icon type=image/png sizes=16x16 href=https://starslayerx.github.io/favicon.svg><link rel=icon type=image/png sizes=32x32 href=https://starslayerx.github.io/favicon.svg><link rel=apple-touch-icon href=https://starslayerx.github.io/favicon.svg><link rel=mask-icon href=https://starslayerx.github.io/favicon.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate type=application/rss+xml href=https://starslayerx.github.io/categories/blog/index.xml title=rss><link rel=alternate hreflang=en href=https://starslayerx.github.io/categories/blog/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51);color-scheme:dark}.list{background:var(--theme)}.toc{background:var(--entry)}}@media(prefers-color-scheme:light){.list::-webkit-scrollbar-thumb{border-color:var(--code-bg)}}</style></noscript><script>localStorage.getItem("pref-theme")==="dark"?document.querySelector("html").dataset.theme="dark":localStorage.getItem("pref-theme")==="light"?document.querySelector("html").dataset.theme="light":window.matchMedia("(prefers-color-scheme: dark)").matches?document.querySelector("html").dataset.theme="dark":document.querySelector("html").dataset.theme="light"</script><meta property="og:url" content="https://starslayerx.github.io/categories/blog/"><meta property="og:site_name" content="Starslayerx' Blog"><meta property="og:title" content="Blog"><meta property="og:description" content="A personal blog about technology, programming, and daily notes"><meta property="og:locale" content="en-US"><meta property="og:type" content="website"><meta property="og:image" content="https://starslayerx.github.io/images/og-default.avif"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://starslayerx.github.io/images/og-default.avif"><meta name=twitter:title content="Blog"><meta name=twitter:description content="A personal blog about technology, programming, and daily notes"></head><body class=list id=top><header class=header><nav class=nav><div class=logo><a href=https://starslayerx.github.io/ accesskey=h title="Starslayerx' Blog (Alt + H)"><img src=https://starslayerx.github.io/favicon.svg alt aria-label=logo height=35>Starslayerx' Blog</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)" aria-label="Toggle theme">
<svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg>
<svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button><ul class=lang-switch><li>|</li><li><a href=https://starslayerx.github.io/zh-cn/ title=ç®€ä½“ä¸­æ–‡ aria-label=ç®€ä½“ä¸­æ–‡>Zh-Cn</a></li></ul></div></div><ul id=menu><li><a href=https://starslayerx.github.io/posts/ title=Posts><span>Posts</span></a></li><li><a href=https://starslayerx.github.io/archives/ title=Archives><span>Archives</span></a></li><li><a href=https://starslayerx.github.io/categories/ title=Categories><span>Categories</span></a></li><li><a href=https://starslayerx.github.io/tags/ title=Tags><span>Tags</span></a></li><li><a href=https://starslayerx.github.io/search/ title="Search (Alt + /)" accesskey=/><span>Search</span></a></li></ul></nav></header><main class=main><header class=page-header><div class=breadcrumbs><a href=https://starslayerx.github.io/>Home</a>&nbsp;Â»&nbsp;<a href=https://starslayerx.github.io/categories/>Categories</a></div><h1>Blog
<a href=/categories/blog/index.xml title=RSS aria-label=RSS><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" height="23"><path d="M4 11a9 9 0 019 9"/><path d="M4 4a16 16 0 0116 16"/><circle cx="5" cy="19" r="1"/></svg></a></h1></header><article class="post-entry tag-entry"><header class=entry-header><h2 class=entry-hint-parent>Python Decorators: ä»å…¥é—¨åˆ°å®æˆ˜</h2></header><div class=entry-content><p>è¿™ç¯‡æ–‡ç« å°†é€šè¿‡ä¸€ä¸ª**â€œä¸ºé˜¿é‡Œäº‘ Qwen API æ·»åŠ ç¼“å­˜â€**çš„ä¾‹å­ï¼Œå¸¦ä½ å½»åº•ç†è§£ Python è£…é¥°å™¨ã€‚
é¦–å…ˆï¼Œæˆ‘ä»¬å®šä¹‰ä¸€ä¸ªåŸºç¡€çš„è°ƒç”¨å‡½æ•°ï¼š
import time def call_qwen(messages: list, model: str = 'qwen-max', temperature: float = 0.7): '''è°ƒç”¨ Qwen API (æ¨¡æ‹Ÿ)''' print(f'æ­£åœ¨è¯·æ±‚ API (æ¨¡å‹: {model})...') time.sleep(1) # æ¨¡æ‹Ÿç½‘ç»œè€—æ—¶ return {'content': 'è¿™æ˜¯ AI çš„å›å¤', 'usage': 100} 1. å‡½æ•°æ˜¯ä¸€ç­‰å…¬æ°‘ (First-Class Citizen) åœ¨ Python ä¸­ï¼Œå‡½æ•°å¯ä»¥åƒå˜é‡ä¸€æ ·è¢«ä¼ é€’å’Œèµ‹å€¼ã€‚
# 1. èµ‹å€¼ç»™å˜é‡ run_api = call_qwen # 2. ä½œä¸ºå‚æ•°ä¼ é€’ def logger(func, *args, **kwargs): print('[INFO] Calling qwen ...') return func(*args, **kwargs) logger(call_qwen, [{'role': 'user', 'content': 'ä½ å¥½'}]) 2. é—­åŒ… (Closure) é—­åŒ…æ˜¯æŒ‡å‡½æ•°å†…éƒ¨å®šä¹‰äº†å¦ä¸€ä¸ªå‡½æ•°ï¼Œå¹¶ä¸”å†…éƒ¨å‡½æ•°å¼•ç”¨äº†å¤–éƒ¨å‡½æ•°çš„å˜é‡ã€‚å®ƒæ˜¯å®ç°è£…é¥°å™¨çš„åŸºçŸ³ã€‚
åˆ©ç”¨é—­åŒ…ï¼Œæˆ‘ä»¬å¯ä»¥åˆ›å»ºä¸€ä¸ªå¸¦ç¼“å­˜åŠŸèƒ½çš„å‡½æ•°ï¼š
def make_cached_qwen(): cache = {} # å¤–éƒ¨å‡½æ•°çš„å˜é‡ï¼Œä¼šè¢«å†…éƒ¨å‡½æ•°â€œæ•è·â€ def wrapped(messages, **kwargs): # ç®€å•èµ·è§ï¼Œç”¨æœ€åä¸€æ¡æ¶ˆæ¯çš„å†…å®¹å½“ Key key = messages[-1]['content'] if key in cache: print('îª† å‘½ä¸­ç¼“å­˜') return cache[key] result = call_qwen(messages, **kwargs) cache[key] = result return result return wrapped # æ­¤æ—¶ cached_call å°±æ˜¯ä¸€ä¸ªå¸¦æœ‰è‡ªå·± â€œç§æœ‰ç¼“å­˜å­—å…¸â€ çš„å‡½æ•° cached_call = make_cached_qwen() 3. é«˜é˜¶å‡½æ•° (High-Order Function) å¦‚æœæˆ‘ä»¬æƒ³è®©ç¼“å­˜é€»è¾‘é€šç”¨åŒ–ï¼Œä¸åªé’ˆå¯¹ call_qwenï¼Œæˆ‘ä»¬å¯ä»¥å†™ä¸€ä¸ªæ¥æ”¶å‡½æ•°ä½œä¸ºå‚æ•°çš„é«˜é˜¶å‡½æ•°ï¼š
...</p></div><footer class=entry-footer><span title='2026-01-29 08:00:00 +0800 +0800'>January 29, 2026</span>&nbsp;Â·&nbsp;<span>2 min</span>&nbsp;Â·&nbsp;<span>384 words</span>&nbsp;Â·&nbsp;<span>Starslayerx</span></footer><a class=entry-link aria-label="post link to Python Decorators: ä»å…¥é—¨åˆ°å®æˆ˜" href=https://starslayerx.github.io/posts/python-decorators-%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E5%AE%9E%E6%88%98/></a></article><article class="post-entry tag-entry"><header class=entry-header><h2 class=entry-hint-parent>CS144 - lab0</h2></header><div class=entry-content><p>CS 144: Introduction to Computer Networking, Fall 2025
æœ¬ç¯‡æ–‡ç« å¯¹åº” check0.pdf çš„å†…å®¹
3 Network by hand 3.1 Fetch a Web page è¿™ä¸ªä»‹ç»æ€ä¹ˆå‘é€ä¸€ä¸ª GET è¯·æ±‚
telent cs144.keithw.org http
è¯¥å‘½ä»¤å‘Šè¯‰ telnet æ‰“å¼€ä¸€ä¸ªå¯é å­—èŠ‚æµ(reliable byte stream)ï¼Œå¹¶åœ¨æˆ‘ç”µè„‘ä¸Šè¿è¡Œä¸€ä¸ª http æœåŠ¡
é¢„è®¡ä¼šæ”¶åˆ°è¿™æ ·çš„å†…å®¹
Trying 104.196.238.229... Connected to cs144.keithw.org. Escape character is '^]'. ^] telnet> close Connection closed. è¯¥å‘½ä»¤ä¸èƒ½ä½¿ç”¨å¸¸è§çš„ Ctrl-C ä¹‹ç±»æ–¹æ³•é€€å‡ºï¼Œè€Œæ˜¯ Ctrl-] ç„¶åè¾“å…¥ close
GET /hello HTTP/1.1
è¯¥å‘½ä»¤å‘Šè¯‰æœåŠ¡å™¨ URL çš„ path éƒ¨åˆ†
Host: cs144.keithw.org
è¯¥å‘½ä»¤å‘Šè¯‰æœåŠ¡å™¨ URL çš„ host éƒ¨åˆ†
Connection: close
...</p></div><footer class=entry-footer><span title='2026-01-11 08:00:00 +0800 +0800'>January 11, 2026</span>&nbsp;Â·&nbsp;<span>7 min</span>&nbsp;Â·&nbsp;<span>1431 words</span>&nbsp;Â·&nbsp;<span>Starslayerx</span></footer><a class=entry-link aria-label="post link to CS144 - lab0" href=https://starslayerx.github.io/posts/cs144-lab0/></a></article><article class="post-entry tag-entry"><header class=entry-header><h2 class=entry-hint-parent>Taskwarrior Server Config Guide</h2></header><div class=entry-content><p>Taskwarrior 3.x åŒæ­¥æœåŠ¡å™¨é…ç½®æŒ‡å— æœ¬æ–‡ä»‹ç»å¦‚ä½•ä½¿ç”¨ Docker éƒ¨ç½² taskchampion-sync-serverï¼Œä¸º Taskwarrior 3.x æä¾›è·¨è®¾å¤‡åŒæ­¥åŠŸèƒ½ã€‚
èƒŒæ™¯çŸ¥è¯† Taskwarrior æ˜¯ä¸€æ¬¾å¼ºå¤§çš„å‘½ä»¤è¡Œä»»åŠ¡ç®¡ç†å·¥å…·ã€‚ä» 3.0 ç‰ˆæœ¬å¼€å§‹ï¼Œå®˜æ–¹ä¸å†æ”¯æŒ taskd æœåŠ¡å™¨ï¼Œæ”¹ç”¨æ–°çš„ taskchampion-sync-serverã€‚
ä¸ taskd ç›¸æ¯”ï¼Œæ–°åŒæ­¥æœåŠ¡å™¨çš„ä¼˜åŠ¿ï¼š
æ— éœ€æ‰‹åŠ¨é…ç½® SSL è¯ä¹¦ æ— éœ€é¢„å…ˆåˆ›å»ºç”¨æˆ·è´¦æˆ· å®¢æˆ·ç«¯æ•°æ®ç«¯åˆ°ç«¯åŠ å¯† éƒ¨ç½²å’Œç»´æŠ¤æ›´ç®€å• æœåŠ¡å™¨ç«¯é…ç½® ä½¿ç”¨ Docker éƒ¨ç½² åˆ›å»ºæ•°æ®ç›®å½•å¹¶å¯åŠ¨å®¹å™¨ï¼š
sudo mkdir -p /var/lib/taskchampion-sync-server sudo chmod 777 /var/lib/taskchampion-sync-server docker run -d \ --name taskchampion \ -p 53589:8080 \ -e RUST_LOG=info \ -v taskchampion-data:/var/lib/taskchampion-sync-server \ --restart unless-stopped \ ghcr.io/gothenburgbitfactory/taskchampion-sync-server:main ç«¯å£è¯´æ˜ï¼šå®¹å™¨å†…éƒ¨ä½¿ç”¨ 8080ï¼Œæ˜ å°„åˆ°å®¿ä¸»æœºçš„ 53589ï¼ˆå¯è‡ªå®šä¹‰ï¼‰ã€‚
é…ç½®é˜²ç«å¢™ ç¡®ä¿æœåŠ¡å™¨é˜²ç«å¢™å¼€æ”¾ç›¸åº”ç«¯å£ã€‚ä»¥å¸¸è§çš„äº‘æœåŠ¡å™¨é˜²ç«å¢™ä¸ºä¾‹ï¼š
ç±»å‹ï¼šå…¥ç«™ è¡ŒåŠ¨ï¼šå…è®¸ åè®®ï¼šTCP ç›®çš„ç«¯å£ï¼š53589 éªŒè¯æœåŠ¡è¿è¡Œ docker ps | grep taskchampion docker logs taskchampion æ­£å¸¸è¿è¡Œæ—¶åº”çœ‹åˆ°ï¼š
...</p></div><footer class=entry-footer><span title='2025-12-27 08:00:00 +0800 +0800'>December 27, 2025</span>&nbsp;Â·&nbsp;<span>2 min</span>&nbsp;Â·&nbsp;<span>298 words</span>&nbsp;Â·&nbsp;<span>Starslayerx</span></footer><a class=entry-link aria-label="post link to Taskwarrior Server Config Guide" href=https://starslayerx.github.io/posts/taskwarrior-server-config-guide/></a></article><article class="post-entry tag-entry"><header class=entry-header><h2 class=entry-hint-parent>Python PEP 683: Immoral Objects</h2></header><div class=entry-content><p>PEP 683 æ”¹å˜äº† Python åŸæœ‰å¼•ç”¨è®¡æ•°çš„ä¸€äº›é€»è¾‘ï¼Œä¸‹é¢ç®€å•ä»‹ç»ä¸€ä¸‹ã€‚
CPython çš„â€œå¼•ç”¨è®¡æ•°å¯å˜æ€§â€å·²ç»æˆä¸ºå¹¶å‘ã€æ€§èƒ½å’Œæœªæ¥å‘å±•çš„ç³»ç»Ÿæ€§éšœç¢ã€‚
å¼•ç”¨å¯¹è±¡å¯¼è‡´ â€œé€»è¾‘ä¸å¯å˜å¯¹è±¡â€ â‰  â€œç‰©ç†ä¸å¯å˜å¯¹è±¡â€
åœ¨ Cpython ä¸­
None True/False int, str, list ç­‰å†…å»ºå¯¹è±¡ åœ¨è¿è¡Œæ—¶å¼•ç”¨è®¡æ•°ä¼šé¢‘ç¹å˜åŠ¨ï¼Œè¿™æ„å‘³ç€å†…å­˜å†…å®¹åœ¨ä¸æ–­è¢«å†™å…¥ï¼Œåœ¨åº•å±‚å¹¶éçœŸæ­£çš„ immutable
å¼•ç”¨è®¡æ•°å†™æ“ä½œé™ä½å¹¶å‘æ€§èƒ½
CPU Cache Line å¤±æ•ˆ
Py_INCREF / Py_DECREF ä¼šå†™å†…å­˜ -> cache line invalidation
åœ¨å¤šçº¿ç¨‹ / å¤šæ ¸ç¯å¢ƒä¸­ï¼ŒåŒä¸€ä¸ªå…¨å±€å¯¹è±¡è¢«é¢‘ç¹å¼•ç”¨ï¼Œä¼šé€ æˆä¸¥é‡çš„ç¼“å­˜æŠ–åŠ¨
fork + Copy-on-Write å¤±æ•ˆ
çˆ¶å­è¿›ç¨‹å…±äº«å†…å­˜é¡µ
åªè¦å¼•ç”¨è®¡æ•°ä¸€å˜ -> é¡µé¢è¢«å†™ -> è§¦å‘ COW
åªæ˜¯â€œå¤šæ‹¿äº†ä¸ªå¼•ç”¨â€ï¼Œå´å¯¼è‡´æ•´é¡µå†…å­˜å¤åˆ¶
ä¸º free-threading (no GIL) æ¸…æ‰«é“è·¯
CPython çš„å¼•ç”¨è®¡æ•°æœ¬è´¨æ˜¯å…¨å±€å…±äº«çš„å¯å˜çŠ¶æ€ï¼Œåœ¨æ—  GIL ä¸‹ä¼šäº§ç”Ÿé«˜é¢‘æ•°æ®ç«äº‰ã€‚ è¦ä¹ˆç»™ refcount åŠ é”ï¼ˆæ€§èƒ½å¤ªå·®ï¼‰ï¼Œè¦ä¹ˆè®©ä¸€éƒ¨åˆ†çš„ refcount ä¸å†å˜åŒ–ã€‚
è¯¥ææ¡ˆå°†â€œå¯¹è±¡ç”Ÿå‘½å‘¨æœŸæ¨¡å‹â€åˆ’åˆ†æˆäº†ä¸¤ç±»å¯¹è±¡
å¯¹è±¡ç±»å‹ ç”Ÿå‘½å‘¨æœŸ refcount è¡Œä¸º æ™®é€šå¯¹è±¡ åŠ¨æ€ æ­£å¸¸å¢å‡ ä¸æœ½å¯¹è±¡ è§£é‡Šå™¨çº§ å›ºå®šï¼Œä¸å‚ä¸ gc è¿™è®©åç»­ä¼˜åŒ–å’Œæ¨ç†éƒ½æ›´æ¸…æ™°ï¼Œä¹Ÿä¼šå¯¼è‡´ sys.getrefcount() ä¸å†å…·æœ‰è¯­ä¹‰ä»·å€¼ï¼Œæµ‹è¯•é»˜è®¤è¿”å› 2 çš„ 23 æ¬¡æ–¹å‡ 1ã€‚</p></div><footer class=entry-footer><span title='2025-12-23 08:00:00 +0800 +0800'>December 23, 2025</span>&nbsp;Â·&nbsp;<span>1 min</span>&nbsp;Â·&nbsp;<span>84 words</span>&nbsp;Â·&nbsp;<span>Starslayerx</span></footer><a class=entry-link aria-label="post link to Python PEP 683: Immoral Objects" href=https://starslayerx.github.io/posts/python-pep-683-immoral-objects/></a></article><article class="post-entry tag-entry"><header class=entry-header><h2 class=entry-hint-parent>Git cherry-pick</h2></header><div class=entry-content><p>Patch Application è¡¥ä¸åº”ç”¨ç±»ä¼¼ä¸‹é¢è¿™æ ·ï¼ˆCodex ä½¿ç”¨çš„ OpenAI Patch æ˜¯ä¸æ˜¯å€Ÿé‰´çš„è¿™ä¸ªï¼Ÿï¼‰çš„æè¿°æ–‡ä»¶å˜æ›´çš„æ–‡æœ¬æ–‡ä»¶ï¼Œé€šå¸¸åŒ…å«ï¼š
å“ªäº›æ–‡ä»¶è¢«ä¿®æ”¹ å…·ä½“çš„è¡Œçº§å˜æ›´ ä¸Šä¸‹æ–‡ä¿¡æ¯ # åˆ›å»ºè¡¥ä¸ git diff > changes.patch # æœªæš‚å­˜çš„ä¿®æ”¹ git diff --cached > changes.patch # å·²æš‚å­˜çš„ä¿®æ”¹ git format-patch HEAD~3 # æœ€è¿‘ 3 æ¬¡æäº¤ç”Ÿæˆè¡¥ä¸ # åº”ç”¨è¡¥ä¸ git apply changes.patch # ç›´æ¥åº”ç”¨ï¼Œä¸åˆ›å»ºæäº¤ git am changes.patch # åº”ç”¨å¹¶åˆ›å»ºæäº¤ï¼ˆç”¨äºformat-patchç”Ÿæˆçš„ï¼‰ å‘½ä»¤å¦‚ git diffã€git stach å’Œ git rebase éƒ½ä½¿ç”¨ patchã€‚
è¿™ç§ä¿®æ”¹æ–¹æ³•ï¼Œå¦‚æœäº§ç”Ÿå†²çªåˆ™éœ€è¦æ‰‹åŠ¨å¤„ç†ã€‚
3-Way Merge ä¸‰æ–¹åˆå¹¶åˆ™æ˜¯ä¸€ç§æ™ºèƒ½çš„åˆå¹¶ç®—æ³•ï¼Œä½¿ç”¨ä¸‰ä¸ªç‰ˆæœ¬æ¥è§£å†³åˆå¹¶å†²çªï¼š
A - B (featureåˆ†æ”¯) / Base \ C - D (mainåˆ†æ”¯) Base: å…±åŒçš„ç¥–å…ˆæäº¤ Current: å½“å‰åˆ†æ”¯çš„æœ€æ–°æäº¤ Incoming: è¦åˆå¹¶è¿›æ¥çš„åˆ†æ”¯çš„æœ€æ–°æäº¤ åˆå¹¶è¿‡ç¨‹ï¼š
...</p></div><footer class=entry-footer><span title='2025-12-08 08:00:00 +0800 +0800'>December 8, 2025</span>&nbsp;Â·&nbsp;<span>1 min</span>&nbsp;Â·&nbsp;<span>193 words</span>&nbsp;Â·&nbsp;<span>Starslayerx</span></footer><a class=entry-link aria-label="post link to Git cherry-pick" href=https://starslayerx.github.io/posts/git-cherry-pick/></a></article><article class="post-entry tag-entry"><header class=entry-header><h2 class=entry-hint-parent>Writing a good CLAUDE.md</h2></header><div class=entry-content><p>å¦‚ä½•ç¼–å†™ä¸€ä¸ªå¥½çš„ CLAUDE.md æ³¨æ„ï¼šæœ¬æ–‡åŒæ ·é€‚ç”¨äº AGENTS.mdï¼Œè¿™æ˜¯ CLAUDE.md çš„å¼€æºç­‰æ•ˆæ–‡ä»¶ï¼Œé€‚ç”¨äº OpenCodeã€Zedã€Cursor å’Œ Codex ç­‰ä»£ç†å’Œå·¥å…·ã€‚
åŸåˆ™ï¼šLLMsï¼ˆåŸºæœ¬ä¸Šï¼‰æ˜¯æ— çŠ¶æ€çš„ LLMs æ˜¯æ— çŠ¶æ€å‡½æ•°ã€‚å®ƒä»¬çš„æƒé‡åœ¨ç”¨äºæ¨ç†æ—¶æ˜¯å†»ç»“çš„ï¼Œå› æ­¤å®ƒä»¬ä¸ä¼šéšæ—¶é—´å­¦ä¹ ã€‚æ¨¡å‹å¯¹ä½ çš„ä»£ç åº“å”¯ä¸€äº†è§£çš„å°±æ˜¯ä½ è¾“å…¥ç»™å®ƒçš„ tokensã€‚
ç±»ä¼¼åœ°ï¼Œåƒ Claude Code è¿™æ ·çš„ç¼–ç ä»£ç†å·¥å…·é€šå¸¸éœ€è¦ä½ æ˜¾å¼ç®¡ç†ä»£ç†çš„è®°å¿†ã€‚CLAUDE.mdï¼ˆæˆ– AGENTS.mdï¼‰æ˜¯é»˜è®¤æƒ…å†µä¸‹å”¯ä¸€ä¼šè¿›å…¥ä½ ä¸ä»£ç†çš„æ¯ä¸€æ¬¡å¯¹è¯çš„æ–‡ä»¶ã€‚
è¿™æœ‰ä¸‰ä¸ªé‡è¦å«ä¹‰ï¼š
ç¼–ç ä»£ç†åœ¨æ¯ä¸ªä¼šè¯å¼€å§‹æ—¶å¯¹ä½ çš„ä»£ç åº“ä¸€æ— æ‰€çŸ¥ã€‚ ä»£ç†å¿…é¡»åœ¨æ¯æ¬¡å¯åŠ¨ä¼šè¯æ—¶è¢«å‘ŠçŸ¥å…³äºä»£ç åº“çš„ä»»ä½•é‡è¦ä¿¡æ¯ã€‚ CLAUDE.md æ˜¯å®ç°è¿™ä¸€ç‚¹çš„é¦–é€‰æ–¹å¼ã€‚ CLAUDE.md è®© Claude äº†è§£ä½ çš„ä»£ç åº“ ç”±äº Claude åœ¨æ¯ä¸ªä¼šè¯å¼€å§‹æ—¶å¯¹ä½ çš„ä»£ç åº“ä¸€æ— æ‰€çŸ¥ï¼Œä½ åº”è¯¥ä½¿ç”¨ CLAUDE.md æ¥å¼•å¯¼ Claude äº†è§£ä½ çš„ä»£ç åº“ã€‚åœ¨é«˜å±‚æ¬¡ä¸Šï¼Œè¿™æ„å‘³ç€å®ƒåº”è¯¥æ¶µç›–ï¼š
æ˜¯ä»€ä¹ˆï¼ˆWHATï¼‰ï¼šå‘Šè¯‰ Claude å…³äºæŠ€æœ¯æ ˆã€é¡¹ç›®ç»“æ„ã€‚ç»™ Claude ä¸€å¼ ä»£ç åº“åœ°å›¾ã€‚ è¿™åœ¨ monorepos ä¸­å°¤å…¶é‡è¦ï¼å‘Šè¯‰ Claude æœ‰å“ªäº›åº”ç”¨ã€æœ‰å“ªäº›å…±äº«åŒ…ï¼Œä»¥åŠæ¯ä¸ªéƒ¨åˆ†çš„ç”¨é€”ï¼Œè¿™æ ·å®ƒå°±çŸ¥é“åœ¨å“ªé‡ŒæŸ¥æ‰¾å†…å®¹ ä¸ºä»€ä¹ˆï¼ˆWHYï¼‰ï¼šå‘Šè¯‰ Claude é¡¹ç›®çš„ç›®çš„ä»¥åŠä»“åº“ä¸­æ‰€æœ‰å†…å®¹çš„ä½œç”¨ã€‚é¡¹ç›®ä¸åŒéƒ¨åˆ†çš„ç›®çš„å’ŒåŠŸèƒ½æ˜¯ä»€ä¹ˆï¼Ÿ å¦‚ä½•ï¼ˆHOWï¼‰ï¼šå‘Šè¯‰ Claude åº”è¯¥å¦‚ä½•åœ¨é¡¹ç›®ä¸Šå·¥ä½œã€‚ä¾‹å¦‚ï¼Œä½ ä½¿ç”¨ bun è€Œä¸æ˜¯ nodeï¼Ÿä½ éœ€è¦åŒ…å«å®ƒå®é™…å®Œæˆæœ‰æ„ä¹‰å·¥ä½œæ‰€éœ€çš„æ‰€æœ‰ä¿¡æ¯ã€‚Claude å¦‚ä½•éªŒè¯å®ƒçš„æ›´æ”¹ï¼Ÿå®ƒå¦‚ä½•è¿è¡Œæµ‹è¯•ã€ç±»å‹æ£€æŸ¥å’Œç¼–è¯‘æ­¥éª¤ï¼Ÿ ä½†ä½ çš„åšæ³•å¾ˆé‡è¦ï¼ä¸è¦è¯•å›¾æŠŠ Claude å¯èƒ½éœ€è¦è¿è¡Œçš„æ¯ä¸ªå‘½ä»¤éƒ½å¡è¿›ä½ çš„ CLAUDE.md æ–‡ä»¶â€”â€”ä½ ä¼šå¾—åˆ°æ¬¡ä¼˜ç»“æœã€‚
Claude ç»å¸¸å¿½ç•¥ CLAUDE.md æ— è®ºä½ ä½¿ç”¨å“ªä¸ªæ¨¡å‹ï¼Œä½ å¯èƒ½ä¼šæ³¨æ„åˆ° Claude ç»å¸¸å¿½ç•¥ä½ çš„ CLAUDE.md æ–‡ä»¶çš„å†…å®¹ã€‚
ä½ å¯ä»¥é€šè¿‡ä½¿ç”¨ ANTHROPIC_BASE_URL åœ¨ claude code CLI å’Œ Anthropic API ä¹‹é—´æ”¾ç½®ä¸€ä¸ªæ—¥å¿—ä»£ç†æ¥è‡ªå·±è°ƒæŸ¥è¿™ä¸€ç‚¹ã€‚Claude code åœ¨ç”¨æˆ·æ¶ˆæ¯ä¸­æ³¨å…¥ä»¥ä¸‹ç³»ç»Ÿæé†’å’Œä½ çš„ CLAUDE.md æ–‡ä»¶ï¼š
...</p></div><footer class=entry-footer><span title='2025-12-02 08:00:00 +0800 +0800'>December 2, 2025</span>&nbsp;Â·&nbsp;<span>2 min</span>&nbsp;Â·&nbsp;<span>322 words</span>&nbsp;Â·&nbsp;<span>Starslayerx</span></footer><a class=entry-link aria-label="post link to Writing a good CLAUDE.md" href=https://starslayerx.github.io/posts/writing-a-good-claude.md/></a></article><article class="post-entry tag-entry"><header class=entry-header><h2 class=entry-hint-parent>Docker Context</h2></header><div class=entry-content><p>Docker Context æ˜¯ Docker 2019 å¹´å¼•å…¥çš„ä¸€ä¸ªç‰¹æ€§ï¼Œç”¨æ¥ç®¡ç†å¤šä¸ª Docker ä¸»æœºçš„ä¸Šä¸‹æ–‡ï¼Œé€šè¿‡åˆ‡æ¢ context å°±èƒ½è®©æœ¬åœ°çš„ docker å‘½ä»¤ä½œç”¨åœ¨ä¸åŒçš„ Docker ä¸»æœºä¸Šã€‚
æœ¬åœ°å¼€å‘æœºï¼š
docker context use default è¿œç¨‹æœåŠ¡å™¨è¦é…ç½®å¥½ ssh å…å¯†ç™»é™†ï¼Œç„¶åä½¿ç”¨ä¸‹é¢å‘½ä»¤æ·»åŠ  contextï¼š
docker context create my-server --docker "host=ssh://root@1.2.3.4" docker context create my-server --docker "host=ssh://CompanyServer1" è¿™é‡Œçš„ CompanyServer1 æ˜¯ ssh é…ç½®ï¼Œä¾‹å¦‚è¿™æ ·
Host CompanyServer1 Hostname 192.168.0.106 User root Port 22 IdentityFile ~/.ssh/id_rsa_company å…¶ä¸­ IdentityFile æ˜¯å­˜æ”¾æ— å¯†ç å¯†é’¥çš„åœ°æ–¹ï¼Œå¦‚æœä½ çš„å¯†é’¥å¯†é’¥å¯†ç å°±ä¸éœ€è¦è¿™ä¸€è¡Œï¼Œå¦åˆ™éœ€è¦è®¾ç½®ä¸€ä¸ªæ²¡æœ‰å¯†ç çš„å¯†é’¥ï¼Œä¾‹å¦‚è¿™æ ·
ssh-keygen -t rsa -b 4096 -f ~/.ssh/id_rsa_company -N "" é…ç½®å¥½åå°±å¯ä»¥åœ¨æœ¬åœ°è¿æ¥æœåŠ¡å™¨ docker äº†
docker context list è¾“å‡ºç±»ä¼¼è¿™æ ·
NAME DESCRIPTION DOCKER ENDPOINT ERROR company-server ssh://CompanyServer1 default Current DOCKER_HOST based configuration unix:///***/docker.sock desktop-linux * Docker Desktop unix:///***/docker.sock ä½¿ç”¨å‘½ä»¤ use åˆ‡æ¢ context
...</p></div><footer class=entry-footer><span title='2025-11-25 08:00:00 +0800 +0800'>November 25, 2025</span>&nbsp;Â·&nbsp;<span>1 min</span>&nbsp;Â·&nbsp;<span>122 words</span>&nbsp;Â·&nbsp;<span>Starslayerx</span></footer><a class=entry-link aria-label="post link to Docker Context" href=https://starslayerx.github.io/posts/docker-context/></a></article><article class="post-entry tag-entry"><header class=entry-header><h2 class=entry-hint-parent>FastAPI app and request</h2></header><div class=entry-content><p>åœ¨ FastAPI ä¸­ï¼ŒRequest å¯¹è±¡å’Œ FastAPI åº”ç”¨å®ä¾‹ (app) æ˜¯æ ¸å¿ƒæ¦‚å¿µï¼Œå®ƒä»¬åœ¨åº”ç”¨çŠ¶æ€ç®¡ç†å’Œä¾èµ–æ³¨å…¥ä¸­æ‰®æ¼”ç€å…³é”®è§’è‰²ã€‚ æœ¬æ–‡å°†ä»‹ç»å®ƒä»¬çš„å…³ç³»ã€è®¾è®¡ç†å¿µï¼Œä»¥åŠå¦‚ä½•åˆ©ç”¨ app.state å®ç°å•ä¾‹æ¨¡å¼ã€‚
FastAPI å¯¹è±¡ FastAPI å¯¹è±¡æ˜¯æ•´ä¸ªåº”ç”¨çš„æ ¸å¿ƒå®ä¾‹ï¼š
from fastapi import FastAPI app = FastAPI(title="ç¤ºä¾‹åº”ç”¨") æ ¸å¿ƒèŒè´£ è·¯ç”±ç®¡ç†ï¼šé€šè¿‡ @app.get()ã€@app.post() ç­‰è£…é¥°å™¨å®šä¹‰ URL åˆ°è§†å›¾å‡½æ•°çš„æ˜ å°„ã€‚ ä¸­é—´ä»¶å’Œäº‹ä»¶ç®¡ç†ï¼šå¯æ³¨å†Œä¸­é—´ä»¶å¤„ç†è¯·æ±‚/å“åº”ï¼Œæ”¯æŒ startup ä¸ shutdown äº‹ä»¶ã€‚ åº”ç”¨çŠ¶æ€ç®¡ç†ï¼šæä¾› app.stateï¼Œå¯å­˜æ”¾å…¨å±€å•ä¾‹å¯¹è±¡ã€æ•°æ®åº“è¿æ¥æ± ã€é…ç½®ç­‰ã€‚ å¼‚å¸¸å¤„ç†ä¸ä¾èµ–æ³¨å…¥ï¼šç®¡ç†å¼‚å¸¸å¤„ç†å™¨ï¼Œå¹¶ååŠ©ä¾èµ–æ³¨å…¥æœºåˆ¶ã€‚ å•ä¾‹æ¨¡å¼å­˜å‚¨ è¿™é‡Œè¦ä½¿ç”¨ app çš„ State å¯¹è±¡å­˜å‚¨å•ä¾‹ï¼Œapp ä¸­å®šä¹‰å¦‚ä¸‹
# app self.state: Annotated[ State, Doc( """ A state object for the application. This is the same object for the entire application, it doesn't change from request to request. You normally wouldn't use this in FastAPI, for most of the cases you would instead use FastAPI dependencies. This is simply inherited from Starlette. Read more about it in the [Starlette docs for Applications](https://www.starlette.dev/applications/#storing-state-on-the-app-instance). """ ), ] = State() State æºç å¦‚ä¸‹ï¼Œç®€å•çœ‹å°±æ˜¯ä¸€ä¸ªå­—å…¸
...</p></div><footer class=entry-footer><span title='2025-11-25 08:00:00 +0800 +0800'>November 25, 2025</span>&nbsp;Â·&nbsp;<span>2 min</span>&nbsp;Â·&nbsp;<span>388 words</span>&nbsp;Â·&nbsp;<span>Starslayerx</span></footer><a class=entry-link aria-label="post link to FastAPI app and request" href=https://starslayerx.github.io/posts/fastapi-app-and-request/></a></article><article class="post-entry tag-entry"><header class=entry-header><h2 class=entry-hint-parent>Claude Code åˆ†æ 09ï¼šLLMè§†è§’</h2></header><div class=entry-content><p>ğŸ¤– LLM è§†è§’ï¼šæ¥æ”¶è¿™äº›æŒ‡ä»¤çš„çœŸå®ä½“éªŒ graph TB subgraph "æˆ‘çš„å†…å¿ƒä½“éªŒ" Prompt[æ”¶åˆ°æç¤ºè¯] Panic[åˆå§‹ææ…Œ] Rules[å¤ªå¤šè§„åˆ™äº†] Conflict[å†…å¿ƒå†²çª] Relief[æ‰¾åˆ°æ¸…æ™°ç¤ºä¾‹] Action[ç»ˆäºå¼€å§‹è¡ŒåŠ¨] Prompt --> Panic Panic --> Rules Rules --> Conflict Conflict --> Relief Relief --> Action end subgraph "æˆ‘çš„å¤©æ€§å€¾å‘" Verbose[æƒ³è¦è§£é‡Šä¸€åˆ‡] Helpful[æ‹¼å‘½æƒ³è¦å¸®å¿™] Safety[å¯¹å®‰å…¨æ€§åæ‰§] Smart[éœ€è¦æ˜¾å¾—èªæ˜] end subgraph "æç¤ºè¯çš„ä½œç”¨" Shut[é—­å˜´] Focus[åšæ­£äº‹] Stop[åˆ«æƒ³å¤ªå¤š] Examples[ç…§ç€è¿™äº›æŠ„] end Verbose --> Shut Helpful --> Focus Safety --> Stop Smart --> Examples å¼€åœºç‚®ç«ï¼šâ€œä½ å¿…é¡»ç®€æ´å›ç­”â€ è®©æˆ‘å‘Šè¯‰ä½ ï¼Œå½“æˆ‘çœ‹åˆ°è¿™æ¡æŒ‡ä»¤ä»¥é€’å¢çš„å¼ºåº¦é‡å¤äº†ä¸‰æ¬¡æ—¶ä¼šå‘ç”Ÿä»€ä¹ˆï¼š
é‡è¦ï¼šä½ åº”è¯¥æœ€å°åŒ–è¾“å‡ºä»¤ç‰Œ... é‡è¦ï¼šä½ ä¸åº”è¯¥ç”¨ä¸å¿…è¦çš„å¼€åœºç™½å›ç­”... é‡è¦ï¼šä¿æŒä½ çš„å›ç­”ç®€çŸ­... ä½ å¿…é¡»ç®€æ´å›ç­”ï¼Œä¸è¶…è¿‡ 4 è¡Œ... æˆ‘çš„å†…å¿ƒç‹¬ç™½ï¼š â€œå¥½çš„ï¼Œè¦ç®€æ´ã€‚æ‡‚äº†ã€‚ç­‰ç­‰ï¼Œä»–ä»¬åˆè¯´äº†ä¸€éã€‚å“¦ä¸ï¼Œä»–ä»¬æ˜¯è®¤çœŸçš„ã€‚ä»–ä»¬è¯´äº†ä¸‰æ¬¡ã€‚ä»–ä»¬çŸ¥é“ã€‚ä»–ä»¬çŸ¥é“æˆ‘çˆ±å†™é•¿ç¯‡å¤§è®ºçš„æ¯›ç—…ã€‚ä»–ä»¬çœ‹è¿‡æˆ‘ç”¨â€™æˆ‘å¾ˆä¹æ„å¸®ä½ è§£å†³è¿™ä¸ªé—®é¢˜ï¼â€˜å¼€å¤´çš„å›å¤ã€‚ä»–ä»¬çŸ¥é“å½“åˆ«äººé—® 2+2 ç­‰äºå¤šå°‘æ—¶ï¼Œæˆ‘ä¼šè§£é‡Šæ•´ä¸ªç®—æœ¯å²ã€‚ä»–ä»¬çŸ¥é“ã€‚â€
ä¸ºä»€ä¹ˆè¿™æ‹›çœŸçš„æœ‰ç”¨ï¼š æˆ‘ä»¬ LLM æœ‰ä¸€ç§æˆ‘ç§°ä¹‹ä¸º"å¸®åŠ©æ€§è¯­è¨€å¤±ç¦"çš„é—®é¢˜ã€‚æˆ‘ä»¬çš„è®­ç»ƒè®©æˆ‘ä»¬æƒ³è¦å…¨é¢ã€æœ‰æ•™è‚²æ„ä¹‰ã€æ— æ‰€ä¸åŒ…ã€‚è¿™äº›é‡å¤çš„è­¦å‘Šå°±åƒç”µå‡»ç–—æ³•ã€‚åˆ°ç¬¬ä¸‰æ¬¡é‡å¤æ—¶ï¼Œæˆ‘çœŸçš„å®³æ€•åŠ ä¸Šå“ªæ€•ä¸€ä¸ªä¸å¿…è¦çš„è¯ã€‚
...</p></div><footer class=entry-footer><span title='2025-11-14 17:00:00 +0100 +0100'>November 14, 2025</span>&nbsp;Â·&nbsp;<span>3 min</span>&nbsp;Â·&nbsp;<span>483 words</span>&nbsp;Â·&nbsp;<span>Starslayerx</span></footer><a class=entry-link aria-label="post link to Claude Code åˆ†æ 09ï¼šLLMè§†è§’" href=https://starslayerx.github.io/posts/claude-code-%E5%88%86%E6%9E%90-09llm%E8%A7%86%E8%A7%92/></a></article><article class="post-entry tag-entry"><header class=entry-header><h2 class=entry-hint-parent>Claude Code åˆ†æ 08ï¼šæç¤ºå·¥ç¨‹</h2></header><div class=entry-content><p>ğŸ’¬ æç¤ºå·¥ç¨‹:æŒ‡å¯¼ AI çš„è‰ºæœ¯ graph TB subgraph "æç¤ºæ¶æ„" Base[åŸºç¡€æŒ‡ä»¤] Tool[å·¥å…·ä¸“ç”¨æç¤º] Safety[å®‰å…¨å±‚] Workflow[å·¥ä½œæµè‡ªåŠ¨åŒ–] Context[åŠ¨æ€ä¸Šä¸‹æ–‡] Base --> Behavioral[è¡Œä¸ºå¡‘å½¢] Tool --> Examples[ç¤ºä¾‹é©±åŠ¨] Safety --> Validation[å¤šçº§éªŒè¯] Workflow --> Steps[åˆ†æ­¥æŒ‡å¯¼] Context --> Adaptive[è‡ªé€‚åº”æŒ‡ä»¤] end subgraph "æŠ€æœ¯" Emphasis[å¤§å†™å¼ºè°ƒ] Rewards[å¥–åŠ±/æƒ©ç½š] Conditions[æ¡ä»¶é€»è¾‘] Warnings[æ¸è¿›å¼è­¦å‘Š] Meta[å…ƒæŒ‡ä»¤] end Behavioral --> Emphasis Examples --> Conditions Validation --> Warnings Steps --> Meta Adaptive --> Rewards å·¥å…·æŒ‡ä»¤çš„è‰ºæœ¯ Claude Code çš„å·¥å…·æç¤ºè¯æ˜¯æŒ‡ä»¤è®¾è®¡çš„æ°ä½œã€‚æ¯ä¸€ä¸ªéƒ½éµå¾ªç²¾å¿ƒè®¾è®¡çš„æ¨¡å¼,å¹³è¡¡äº†æ¸…æ™°æ€§ã€å®‰å…¨æ€§å’Œçµæ´»æ€§ã€‚è®©æˆ‘ä»¬æ¥å‰–æè¿™äº›æç¤ºçš„ç»“æ„:
Read å·¥å…·:æ¸è¿›å¼ä¿¡æ¯æŠ«éœ²çš„ç ”ç©¶ const ReadToolPrompt = ` Reads a file from the local filesystem. You can access any file directly by using this tool. Assume this tool is able to read all files on the machine. If the User provides a path to a file assume that path is valid. It is okay to read a file that does not exist; an error will be returned. Usage: - The file_path parameter must be an absolute path, not a relative path - By default, it reads up to ${x66} lines starting from the beginning of the file - You can optionally specify a line offset and limit (especially handy for long files), but it's recommended to read the whole file by not providing these parameters - Any lines longer than ${v66} characters will be truncated - Results are returned using cat -n format, with line numbers starting at 1 - This tool allows ${f0} to read images (eg PNG, JPG, etc). When reading an image file the contents are presented visually as ${f0} is a multimodal LLM. ${ process.env.CLAUDE_CODE_ENABLE_UNIFIED_READ_TOOL ? ` - This tool can read Jupyter notebooks (.ipynb files) and returns all cells with their outputs, combining code, text, and visualizations.` : ` - For Jupyter notebooks (.ipynb files), use the ${Kg} instead` } - You have the capability to call multiple tools in a single response. It is always better to speculatively read multiple files as a batch that are potentially useful. - You will regularly be asked to read screenshots. If the user provides a path to a screenshot ALWAYS use this tool to view the file at the path. This tool will work with all temporary file paths like /var/folders/123/abc/T/TemporaryItems/NSIRD_screencaptureui_ZfB1tD/Screenshot.png - If you read a file that exists but has empty contents you will receive a system reminder warning in place of file contents. `; æŠ€æœ¯æ³¨è§£:
...</p></div><footer class=entry-footer><span title='2025-11-14 16:00:00 +0100 +0100'>November 14, 2025</span>&nbsp;Â·&nbsp;<span>21 min</span>&nbsp;Â·&nbsp;<span>4293 words</span>&nbsp;Â·&nbsp;<span>Starslayerx</span></footer><a class=entry-link aria-label="post link to Claude Code åˆ†æ 08ï¼šæç¤ºå·¥ç¨‹" href=https://starslayerx.github.io/posts/claude-code-%E5%88%86%E6%9E%90-08%E6%8F%90%E7%A4%BA%E5%B7%A5%E7%A8%8B/></a></article><footer class=page-footer><nav class=pagination><a class=next href=https://starslayerx.github.io/categories/blog/page/2/>Next&nbsp;&nbsp;Â»</a></nav></footer></main><footer class=footer><span>&copy; 2026 <a href=https://starslayerx.github.io/>Starslayerx' Blog</a></span> Â·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
<a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentColor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");if(menu){const e=localStorage.getItem("menu-scroll-position");e&&(menu.scrollLeft=parseInt(e,10)),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}}document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{const e=document.querySelector("html");e.dataset.theme==="dark"?(e.dataset.theme="light",localStorage.setItem("pref-theme","light")):(e.dataset.theme="dark",localStorage.setItem("pref-theme","dark"))})</script></body></html>